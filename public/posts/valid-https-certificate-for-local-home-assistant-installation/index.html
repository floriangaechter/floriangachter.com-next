<!doctype html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Simple solution for a valid HTTPS certificate for Home Assistant
You probably know the pain. You want to be smart and try to run all the
different services locally in your home network to secure yourself against any
possible attacks from the outside. But still, there is this one annoying thing:



While, in my opinion, it&rsquo;s not too much of a security issue (since the whole
traffic is contained to your home network), it&rsquo;s still bothering me to always
have to add an exception for every local site I visit." />
    <title>
      Simple solution for a valid HTTPS certificate for Home Assistant | floriangaechter.com
    </title>
        
<link rel="stylesheet" href="/css/main.css" />
  
 
  </head>

  <body
    class="bg-flexoki-paper dark:bg-flexoki-black text-flexoki-black dark:text-flexoki-paper selection:bg-flexoki-black selection:text-flexoki-paper dark:selection:bg-flexoki-paper dark:selection:text-flexoki-black"
  >
    <div class="container mx-auto px-4">
      <nav class="flex py-4 border-b">
  <ul class="-ml-2 flex flex-wrap">
    <li class="mt-2">
      <a
        class="p-1 ml-1 rounded hover:bg-flexoki-base-50 dark:hover:bg-flexoki-base-800"
        href="/"
        >Home</a
      >
    </li>
    <li class="mt-2">
      <a
        class="p-1 ml-1 rounded hover:bg-flexoki-base-50 dark:hover:bg-flexoki-base-800"
        href="/about/"
        >About</a
      >
    </li>
    <li class="mt-2">
      <a
        class="p-1 ml-1 rounded hover:bg-flexoki-base-50 dark:hover:bg-flexoki-base-800"
        href="/uses/"
        >Uses</a
      >
    </li>
    <li class="mt-2">
      <a
        class="p-1 ml-1 rounded hover:bg-flexoki-base-50 dark:hover:bg-flexoki-base-800"
        href="/rss.xml"
        >RSS</a
      >
    </li>
    <li class="mt-2">
      <a
        class="p-1 ml-1 rounded hover:bg-flexoki-base-50 dark:hover:bg-flexoki-base-800"
        href="https://mastodon.social/@neither1nor0"
        >Mastodon</a
      >
    </li>
    <li class="mt-2">
      <a
        class="p-1 ml-1 rounded hover:bg-flexoki-base-50 dark:hover:bg-flexoki-base-800"
        href="https://github.com/floriangaechter/"
        >Github</a
      >
    </li>
  </ul>
  <ul class="flex flex-none ml-auto">
    <li class="mt-2">
      <button
        id="theme-toggle"
        type="button"
        class="flex hover:bg-flexoki-base-50 dark:hover:bg-flexoki-base-800 rounded p-1 ml-4 cursor-pointer"
        title="Theme"
        transition:persist
      >
        <svg
          id="theme-toggle-dark-icon"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="h-4 dark:hidden fill-current"
        >
          <title>Theme toggle dark</title>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
          ></path>
        </svg>
        <svg
          id="theme-toggle-light-icon"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-4 h-4 hidden dark:block fill-current"
        >
          <title>Theme toggle light</title>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
          ></path>
        </svg>
      </button>
    </li>
  </ul>
</nav>

      <div class="my-12">
<div
  class="prose prose-flexoki dark:prose-invert prose-headings:text-xl prose-headings:font-medium prose-lead:text-base"
>
  <h1 id="simple-solution-for-a-valid-https-certificate-for-home-assistant">Simple solution for a valid HTTPS certificate for Home Assistant</h1>
<p>You probably know the pain. You want to be smart and try to run all the
different services locally in your home network to secure yourself against any
possible attacks from the outside. But still, there is this one annoying thing:</p>
<p><picture><source srcset="http://localhost:1313/posts/valid-https-certificate-for-local-home-assistant-installation/unsecured.avif" type="image/avif" /><img
      src="http://localhost:1313/posts/valid-https-certificate-for-local-home-assistant-installation/unsecured.png"
      alt="Screenshot of the address bar of an unsecured website"
      loading="lazy"
      decoding="async"
      width="320"
      height="28"
    /></picture>

</p>
<p>While, in my opinion, it&rsquo;s not too much of a security issue (since the whole
traffic is contained to your home network), it&rsquo;s still bothering me to always
have to add an exception for every local site I visit.</p>
<p>There&rsquo;s an excellent service called <a href="https://letsencrypt.org/">Let&rsquo;s Encrypt</a>,
which lets you generate valid https certificates automatically. But since I try
to create a certificate that&rsquo;s valid for my local home network (which should be
unreachable from the outside), this solution doesn&rsquo;t work for local domains.</p>
<h2 id="meet-mkcert">Meet mkcert</h2>
<p>There are a lot of examples on the web on how to create self-signed certificates
that you then can add to your certificate store and get around the
unsecured-issue. But they all seem to be rather complicated and take a lot of
time. So I tried to find a simpler solution and stumbled upon <a href="https://github.com/FiloSottile/mkcert">mkcert</a>,
a zero-config tool to make locally trusted certificates, by <a href="https://filippo.io/">Filippo Valsorda</a>.</p>
<p>This tool basically lets you turn any domain into a trusted domain (aka. the
locked lock in your URL bar). And it does this by running one command only,
which is pretty sweet if you asked me.</p>
<p>I&rsquo;m not going to explain how to install it here since the GitHub page of mkcert
explains it pretty well. There are examples for macOS, Linux, and Windows. One
caveat might be, that it&rsquo;s a command-line tool, so be sure to freshen up those
hacking skills ðŸ˜‰.</p>
<p>There&rsquo;re <a href="https://github.com/FiloSottile/mkcert#mobile-devices">instructions</a>
on how to install the root-certificate on iOS. Make sure to <a href="https://support.apple.com/en-nz/HT204477">enable full trust</a>
after installing it (which I forgot and got really frustratedâ€¦).</p>
<h2 id="installation-in-home-assistant">Installation in Home Assistant</h2>
<p>If you installed mkcert and ran it correctly for your Home Assistant
installation, you should get two certificate files:</p>
<p><picture><source srcset="http://localhost:1313/posts/valid-https-certificate-for-local-home-assistant-installation/certificates.avif" type="image/avif" /><img
      src="http://localhost:1313/posts/valid-https-certificate-for-local-home-assistant-installation/certificates.png"
      alt="Screenshot of the two generated certificates"
      loading="lazy"
      decoding="async"
      width="450"
      height="236"
    /></picture>

</p>
<p>Copy those two files to your <code>/ssl</code> directory in your Home Assistant
installation. Then, adapt your <code>configuration.yaml</code> file accordingly:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ssl_certificate</span><span class="p">:</span><span class="w"> </span><span class="l">/ssl/homeassistant.local.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ssl_key</span><span class="p">:</span><span class="w"> </span><span class="l">/ssl/homeassistant.local-key.pem</span><span class="w">
</span></span></span></code></pre></div><p>(Make sure to change the filenames of the certificates to the ones you generated)</p>
<p>Now restart Home Assistant and depending on your browser, it should pick up the
proper certificate from the server and you&rsquo;ll be greeted by a shining grey
<strong>locked</strong> lock:</p>
<p><picture><source srcset="http://localhost:1313/posts/valid-https-certificate-for-local-home-assistant-installation/secured.avif" type="image/avif" /><img
      src="http://localhost:1313/posts/valid-https-certificate-for-local-home-assistant-installation/secured.png"
      alt="Screenshot of the address bar of a secured website"
      loading="lazy"
      decoding="async"
      width="261"
      height="28"
    /></picture>

</p>
<h2 id="conclusion">Conclusion</h2>
<p>As you see, it&rsquo;s super easy to generate a certificate that&rsquo;s accepted in the
browser as valid, without hammering in 100 different commands. Of course, this
isn&rsquo;t the <em>most</em> secure method of doing it. But again, since you&rsquo;re in your
private home network, this shouldn&rsquo;t be too much of an issue. Plus, this method
works for other services too. I use it to secure all of my locally hosted
services like Synology NAS Diskstation, Nextcloud, etc.</p>

</div>
</div>
      <div class="prose prose-flexoki dark:prose-invert prose-sm max-w-none mb-6">
  Â© 2025 Copyright Florian GÃ¤chter. All rights reserved. This
  site is hosted on <a href="https://uberspace.de/">Uberspace</a>.
</div>

    </div>

      
<script src="/js/theme.js"></script>
 

  </body>
</html>
